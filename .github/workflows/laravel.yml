name: Laravel CI

# Đảm bảo trigger khớp với hành động của bạn
on:
  push:
    branches: [ "main", "master" ] # Chạy cho cả main hoặc master để an toàn
  pull_request:
    branches: [ "main", "master" ]

jobs:
  laravel-tests: # Tên tác vụ
    [cite_start]runs-on: ubuntu-latest # Hệ điều hành máy ảo [cite: 31, 104]
    steps:
      - [cite_start]uses: actions/checkout@v4 # Bước kéo code [cite: 34, 105]

      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          [cite_start]php-version: '8.2' # Phiên bản PHP [cite: 36, 104]

      - name: Install Dependencies
        [cite_start]run: composer install --no-ansi --no-interaction --no-scripts --no-progress --prefer-dist [cite: 39]

      - name: Prepare App
        run: |
          cp .env.example .env
          php artisan key:generate

      - name: Run Tests
        [cite_start]run: php artisan test # Lệnh then chốt bạn đã chạy thành công ở Local [cite: 41, 106]
